#!/usr/bin/env bash

# Make sure we work in this directory, coz it stores the state between the
# phases of release process.

BUILD_DIR="$1"
cd "$BUILD_DIR"

function log() {
    echo "-----> $*"
}

function indent() {
    c='s/^/       /'
    case $(uname) in
        Darwin) sed -l "$c";;
        *)      sed -u "$c";;
    esac
}

# Activate poetry 
source $HOME/.poetry/env

# Install all the deps, including the main package declared in pyproject.toml
poetry install

# These lines are temporary, will remove it after debugging
which web 
which release

